# 缺陷跟踪与管理

## 1. 缺陷分类

### 1.1 严重程度（Severity）
- **致命（Critical）**：系统崩溃、数据丢失、安全漏洞
- **严重（High）**：核心功能无法使用
- **中等（Medium）**：功能部分失效，有替代方案
- **轻微（Low）**：界面问题、提示信息错误
- **建议（Enhancement）**：功能改进建议

### 1.2 优先级（Priority）
- **P0 - 紧急**：立即修复，影响生产环境
- **P1 - 高**：尽快修复，影响主要功能
- **P2 - 中**：计划修复，影响次要功能
- **P3 - 低**：有时间再修复，影响较小

### 1.3 缺陷类型
- **Bug**：功能错误
- **性能问题**：响应慢、资源占用高
- **安全问题**：安全漏洞
- **兼容性问题**：浏览器、设备兼容
- **UI/UX 问题**：界面、交互问题

## 2. 缺陷生命周期

### 2.1 状态流转
```
新建（New）
  ↓
已确认（Confirmed）
  ↓
进行中（In Progress）
  ↓
已修复（Fixed）
  ↓
已验证（Verified）
  ↓
已关闭（Closed）

或

已拒绝（Rejected）
  ↓
已关闭（Closed）
```

### 2.2 状态说明
- **新建（New）**：新报告的缺陷
- **已确认（Confirmed）**：已确认是真实缺陷
- **进行中（In Progress）**：正在修复
- **已修复（Fixed）**：已修复，等待验证
- **已验证（Verified）**：已验证修复成功
- **已关闭（Closed）**：缺陷已解决或拒绝
- **已拒绝（Rejected）**：不是缺陷或重复

## 3. 缺陷报告规范

### 3.1 报告模板
使用 GitHub Issue 模板报告缺陷，包含以下信息：

1. **标题**：简洁描述问题
2. **严重程度**：Critical/High/Medium/Low
3. **优先级**：P0/P1/P2/P3
4. **环境信息**：操作系统、浏览器、版本等
5. **复现步骤**：详细步骤
6. **预期结果**：应该发生什么
7. **实际结果**：实际发生了什么
8. **截图/日志**：相关证据
9. **相关 Issue**：关联的 Issue

### 3.2 报告示例
```markdown
## 缺陷描述
用户登录后，点击"用户管理"菜单时出现 500 错误。

## 严重程度
High

## 优先级
P1

## 环境信息
- 操作系统：Windows 10
- 浏览器：Chrome 120
- 后端版本：1.0.0
- 前端版本：1.0.0

## 复现步骤
1. 使用管理员账号登录
2. 点击左侧菜单"用户管理"
3. 观察错误信息

## 预期结果
应该显示用户列表页面

## 实际结果
显示 500 Internal Server Error

## 截图
[截图链接]

## 日志信息
```
ERROR: Exception in ASGI application
...
```

## 相关 Issue
#123
```

## 4. 缺陷处理流程

### 4.1 缺陷接收
1. 测试人员或用户报告缺陷
2. 使用 Issue 模板创建缺陷报告
3. 自动分配标签（bug、severity、priority）

### 4.2 缺陷确认
1. 开发人员确认缺陷
2. 评估严重程度和优先级
3. 更新 Issue 状态为"已确认"
4. 分配给负责的开发人员

### 4.3 缺陷修复
1. 开发人员分析问题
2. 编写修复代码
3. 添加测试用例
4. 提交 Pull Request
5. 更新 Issue 状态为"进行中"

### 4.4 缺陷验证
1. 代码审查通过
2. CI 检查通过
3. 测试人员验证修复
4. 更新 Issue 状态为"已验证"

### 4.5 缺陷关闭
1. 验证通过后关闭 Issue
2. 记录修复版本
3. 更新 CHANGELOG

## 5. 缺陷统计与分析

### 5.1 统计指标
- **缺陷总数**：所有报告的缺陷
- **已修复数**：已修复的缺陷
- **修复率**：已修复数 / 缺陷总数
- **平均修复时间**：从报告到修复的平均时间
- **严重缺陷数**：Critical 和 High 级别的缺陷
- **重复缺陷率**：重复报告的缺陷比例

### 5.2 分析维度
- **按模块**：各模块的缺陷分布
- **按严重程度**：各级别缺陷的数量
- **按优先级**：各优先级缺陷的数量
- **按状态**：各状态缺陷的数量
- **按时间**：缺陷报告和修复的时间趋势

### 5.3 定期报告
每周/每月生成缺陷分析报告，包括：
- 缺陷统计
- 趋势分析
- 问题分析
- 改进建议

## 6. 缺陷预防

### 6.1 代码审查
- 所有代码必须经过审查
- 关注常见错误模式
- 检查边界条件

### 6.2 自动化测试
- 单元测试覆盖率 ≥ 80%
- 集成测试覆盖主要流程
- 端到端测试覆盖关键场景

### 6.3 静态代码分析
- ESLint（前端）
- Flake8、Black、Mypy（后端）
- Bandit（安全扫描）

### 6.4 代码质量检查
- CI 中集成代码质量检查
- 禁止合并未通过检查的代码
- 定期进行代码审查

## 7. 缺陷跟踪工具

### 7.1 GitHub Issues
- 使用 Issue 跟踪缺陷
- 使用标签分类和筛选
- 使用 Milestone 关联版本
- 使用 Projects 看板管理

### 7.2 标签体系
- **类型**：bug, enhancement, question
- **严重程度**：critical, high, medium, low
- **优先级**：p0, p1, p2, p3
- **模块**：backend, frontend, api, ui
- **状态**：confirmed, in-progress, fixed, verified

### 7.3 看板管理
使用 GitHub Projects 创建缺陷看板：
- **待处理**：新建的缺陷
- **已确认**：已确认的缺陷
- **进行中**：正在修复的缺陷
- **待验证**：已修复待验证的缺陷
- **已关闭**：已验证或拒绝的缺陷

## 8. 缺陷回归测试

### 8.1 回归测试策略
- 修复的缺陷必须添加回归测试
- 定期执行完整的回归测试套件
- 重点关注已修复缺陷的验证

### 8.2 测试用例管理
- 为每个缺陷创建测试用例
- 测试用例覆盖缺陷场景
- 测试用例纳入自动化测试

### 8.3 回归测试执行
- 每次发布前执行完整回归测试
- 修复缺陷后执行相关回归测试
- 记录回归测试结果

## 9. 缺陷管理最佳实践

### 9.1 及时响应
- 24 小时内响应新报告的缺陷
- 48 小时内确认缺陷
- 根据优先级安排修复时间

### 9.2 清晰沟通
- 缺陷报告信息完整
- 修复说明清晰
- 及时更新缺陷状态

### 9.3 持续改进
- 定期分析缺陷趋势
- 识别常见问题模式
- 改进开发流程和测试策略

### 9.4 知识积累
- 记录典型缺陷案例
- 总结修复经验
- 分享给团队成员

## 10. 缺陷跟踪检查清单

### 缺陷报告时
- [ ] 使用 Issue 模板
- [ ] 填写完整信息
- [ ] 添加相关标签
- [ ] 关联相关 Issue

### 缺陷修复时
- [ ] 分析问题根源
- [ ] 编写修复代码
- [ ] 添加测试用例
- [ ] 更新 Issue 状态
- [ ] 提交 Pull Request

### 缺陷验证时
- [ ] 验证修复有效
- [ ] 检查是否有副作用
- [ ] 更新 Issue 状态
- [ ] 记录验证结果

### 缺陷关闭时
- [ ] 确认已完全修复
- [ ] 记录修复版本
- [ ] 更新 CHANGELOG
- [ ] 关闭 Issue

